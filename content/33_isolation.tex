% vim:set ft=tex
\section{Isolation}
\label{design:isolation}

Fiasco.OC provides strong isolation and also real-time guarantees.
A requirement-aware thread to core mapping can support these guarantees.
The following discusses security and real-time needs of applications and how to
manage these with a load balancer.

\paragraph{Security}
As presented in section \ref{state:related} even in virtualized environments
the CPU cache is a valid side channel to attack secret information.
To reduce the channel's throughput, security critical applications should share
as little cache as possible with untrusted applications.
In Haswell's inclusive cache hierarchy, the \gls{llc} contains the lines
present in the core local L1 and L2 caches, and is shared among all cores of a
chip.

As shown in \cite{inci_seriously_2015} and \cite{liu_last-level_2015},
the impact of placing security critical tasks on a seprate core is limited.
Still, a security core increases the difficulty for PRIME+PROBE attacks.
To completely mitigate this channel, no caches can be shared between the
security task and the attacker.
Nowadays, only a multi-socket system can enforce this.
\\

The security requirements of a task are known at system design.
Therefore, a way to provide this static information to the load balancing
service is necessary.
It is also preferable to define specific security groups to separate different
security critical tasks or to create a group of related, equally trusted
security tasks.
Hence, the configuration scheme must allow to define groups and identify the
same group in the configurations of different tasks.

This can be achieved by a per task configuration parameter identifying
different groups by name.


\paragraph{Real-Time}
A similar isolation guarantee is necessary for real-time tasks.
Real-time tasks need predictable execution times.
By using an exclusive core and cache, real-time tasks are less disturbed by best
effort workloads.
Due to the inclusive cache design, evictions from the \gls{llc} require
evicting the cache line in the core local caches, too.
Hence, this approach limits the disturbance, but does not eliminate them.
Also, several cores can be assigned to a real-time task group, depending on its
requirements.

As the requirements of real-time tasks are also known before runtime, a static
configuration can be used.
The configuration parameter must identify different groups by name
and display the physical core requirements.


\paragraph{Configuration}
% move to implementation?
The configuration parameters for security and real-time tasks are the
following:
\begin{lstlisting}
  sec = <Name>
  rt  = <Name>_<number_of_cores>
\end{lstlisting}

Multicore support for real-time tasks is not provided at the current state of
the implementation.
If the number of \texttt{rt} and \texttt{sec} groups is higher than the number
of physical cores the system will inform the user via an error message and shut
down.
